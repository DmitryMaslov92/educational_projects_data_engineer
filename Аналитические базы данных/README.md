# Аналитические базы данных

## Описание:

В данном учебном задании необходимо расширить и доработать аналитическое хранилище данных. Работу нужно провести в СУБД Vertica. Результатом работы должны стать новые расчетные показатели по конверсии групп пользователей.

## Цель работы:

Нужно определить группы пользователей, в которых начала общаться большая часть их участников. В терминологии маркетинга их бы назвали пабликами с высокой конверсией в первое сообщение.

Необходимо перенести из S3 в staging-слой новые данные о входе и выходе пользователей из групп — файл group_log.csv.

Создать в слое постоянного хранения таблицы для новых данных.

Перенести новые данные из staging-области в слой DDS.

Рассчитать конверсионные показатели для десяти самых старых групп.

## Этапы работы: 

1. Загрузить данные из S3.
2. Создать таблицу group_log в Vertica.
3. Загрузить данные в Vertica.
4. Создать таблицу связи.
5. Создать скрипты миграции в таблицу связи.
6. Создать и наполнить сателлит.
7. Подготовить CTE для ответов бизнесу.

## Описание рабочих файлов:

Папка src/sql.

cte.sql - SQL-запрос на создание временной таблицы cte (из user_group_log и user_group_messages).

dds_l_user_group_activity_ddl.sql - SQL-запрос на создание таблицы l_user_group_activity слоя DWH (dds).

dds_l_user_group_activity_migration.sql - SQL-запрос на заполнение таблицы l_user_group_activity слоя DWH (dds).

dds_s_auth_history.sql - SQL-запрос на создание и заполнение таблицы s_auth_history слоя DWH (dds).

stg_group_log_ddl.sql - SQL-запрос на создание таблицы group_log STAGING слоя.

Папка src/dags.

project_get_data_dag.py - даг на получение данных из хранилища.

project_load_data_dag.py - даг на загрузку данных в Vertica.

